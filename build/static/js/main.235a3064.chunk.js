(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),c=n.n(i),r=n(9),o=n.n(r),s=(n(15),n(5)),l=n(2),d=n(3),u=n(7),h=n(16);function j(e,t,n){return.21*e+.72*t+.07*n}function b(e,t){var n=t.maxWidth,a=t.maxHeight,i=t.autoScale;console.log(i);var c=i?Math.floor(function(){var e=document.createElement("pre");e.style.display="inline",e.textContent=" ",document.body.appendChild(e);var t=e.getBoundingClientRect(),n=t.width,a=t.height;return document.body.removeChild(e),a/n}()*e.width):e.width;if(e.height>a){var r=Math.floor(c*a/e.height);return Object(l.a)(Object(l.a)({},e),{},{width:r,height:a})}if(e.width>n){var o=Math.floor(e.height*n/c);return Object(l.a)(Object(l.a)({},e),{},{width:n,height:o})}return e}function g(e,t){for(var n=e.data.slice(),a=0;a<n.length;a+=4){var i=j(n[a],n[a+1],n[a+2]);n[a]=n[a+1]=n[a+2]=i}return new ImageData(n,e.width,e.height)}function m(e,t){var n=t.colors,a=new h({colors:n,dithKern:"FloydSteinberg",minHueCols:0});a.sample(e.data.slice());var i=a.reduce(e.data.slice());return new ImageData(Uint8ClampedArray.from(i),e.width,e.height)}function f(e,t,n){var a=document.createElement("canvas"),i=a.getContext("2d");return a.height=n,a.width=t,i.drawImage(e,0,0,t,n),i.getImageData(0,0,t,n)}var O={file:null};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=Object(i.useState)(e.file),n=Object(d.a)(t,2),a=(n[0],n[1]),c=Object(i.useState)(!1),r=Object(d.a)(c,2),o=r[0],u=r[1],h=Object(i.useState)(null),j=Object(d.a)(h,2),x=j[0],v=j[1],p=Object(i.useState)({maxWidth:80,maxHeight:80,autoScale:!0,colorizeImage:!1,colorizeAscii:!1,colors:12,backgroundColorAscii:"#1D2A49"}),C=Object(d.a)(p,2),w=C[0],k=C[1];function N(e){u(!0);var t=new FileReader;t.onload=function(e){var n=new Image;n.onload=function(){var e=b({data:new Uint8ClampedArray,width:n.width,height:n.height},w),t=e.width,a=e.height,i=f(n,t,a),c=null;c=w.colorizeImage?m(i,w):g(m(i,w)),v(c),u(!1)},t.result&&(n.src=t.result)},t.readAsDataURL(e),a(e)}function A(e,t){k(Object(l.a)(Object(l.a)({},w),{},Object(s.a)({},e,t)))}return{image:x,processing:o,readFile:N,configuration:w,setConfigurationParam:A}};n(17);var v=function(e){var t=e.imageData,n=Object(i.useRef)(null);return Object(i.useEffect)((function(){if(t){var e=n.current;if(!e)return;e.getContext("2d").putImageData(t,0,0)}}),[t]),t?Object(a.jsx)("canvas",{id:"Canvas-image-container",width:t.width,height:t.height,ref:n}):Object(a.jsx)(a.Fragment,{})},p=(n(18),"$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`'. "),C=p.length;var w=function(e){var t=e.imageData,n=e.colorize,c=e.processing,r=Object(i.useMemo)((function(){return function(e){if(console.log("drawAscii"),!e)return"";return l(e).reduce((function(t,n,a){var i=s(n);return(a+1)%e.width===0&&(i+="\n"),t+i}),"")}(t)}),[t]),o=Object(i.useMemo)((function(){return function(e){if(console.log("drawAsciiWithColor"),!e)return"";var t=l(e),n=function(e){for(var t=[],n=0;n<e.data.length;n+=4){var a=e.data[n],i=e.data[n+1],c=e.data[n+2];t=[].concat(Object(u.a)(t),[[a,i,c]])}return t}(e);if(t.length!==n.length)return Object(a.jsx)(a.Fragment,{});for(var i=[],c=0;c<t.length;++c){var r=s(t[c]);(c+1)%e.width===0&&i.push(Object(a.jsx)("br",{},c+"br")),i.push(Object(a.jsx)("span",{style:{color:h(n[c])},children:r},c))}return i}(t)}),[t]);function s(e){return p[Math.ceil((C-1)*e/255)]}function l(e){for(var t=[],n=0;n<e.data.length;n+=4){var a=j(e.data[n],e.data[n+1],e.data[n+2]);t=[].concat(Object(u.a)(t),[a])}return t}function h(e){var t=Object(d.a)(e,3),n=t[0],a=t[1],i=t[2];return"rgb(".concat(n,", ").concat(a,", ").concat(i,")")}return c?Object(a.jsx)("p",{children:"Work in progress..."}):Object(a.jsx)("pre",{className:"Ascii-content",children:n?o:r})};n(19);var k=function(e){var t=e.configuration,n=e.setConfigurationParam,i=t.maxWidth,c=t.maxHeight,r=t.colors,o=t.colorizeImage,s=t.autoScale;return Object(a.jsxs)("div",{id:"Form-content",children:[Object(a.jsx)("h2",{className:"H2-title",children:"Setup"}),Object(a.jsxs)("div",{className:"Slide-container",children:[Object(a.jsxs)("div",{className:"Slide-container-label",children:["Max Width : ",i]}),Object(a.jsx)("div",{className:"Slide-container-input",children:Object(a.jsx)("input",{type:"range",min:80,max:100,value:i,className:"slider",onChange:function(e){return n("maxWidth",parseInt(e.target.value))}})})]}),Object(a.jsxs)("div",{className:"Slide-container",children:[Object(a.jsxs)("div",{className:"Slide-container-label",children:["Max Height : ",c]}),Object(a.jsx)("div",{className:"Slide-container-input",children:Object(a.jsx)("input",{type:"range",min:80,max:100,value:c,className:"slider",onChange:function(e){return n("maxHeight",parseInt(e.target.value))}})})]}),Object(a.jsxs)("div",{className:"Checkbox-container",children:[Object(a.jsx)("label",{htmlFor:"autoscale",children:"Autoscale"}),Object(a.jsx)("input",{type:"checkbox",name:"autoscale",id:"autoscale",checked:s,onChange:function(e){return n("autoScale",!!e.target.checked)}})]}),Object(a.jsxs)("div",{className:"Checkbox-container",children:[Object(a.jsx)("label",{htmlFor:"Colorize",children:"Colorize Image"}),Object(a.jsx)("input",{type:"checkbox",name:"Colorize",id:"Colorize",checked:o,onChange:function(e){return n("colorizeImage",!!e.target.checked)}})]}),Object(a.jsxs)("div",{className:"Slide-container",children:[Object(a.jsxs)("div",{className:"Slide-container-label",children:["Colors : ",r]}),Object(a.jsx)("div",{className:"Slide-container-input",children:Object(a.jsx)("input",{type:"range",min:2,max:68,value:r,className:"slider",onChange:function(e){return n("colors",parseInt(e.target.value))}})})]})]})};n(20);var N=function(e){var t=e.configuration,n=e.setConfigurationParam,i=t.colorizeAscii,c=t.backgroundColorAscii;return Object(a.jsxs)("div",{id:"Option",children:[Object(a.jsx)("h2",{className:"H2-title",children:"Options"}),Object(a.jsxs)("div",{className:"Checkbox-container-color",children:[Object(a.jsx)("label",{htmlFor:"Colorize",children:"Colorize Ascii"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"checkbox",name:"Colorize",id:"Colorize",checked:i,onChange:function(e){return n("colorizeAscii",!!e.target.checked)}})]}),Object(a.jsx)("p",{id:"hint",children:"Toggle this option can takes time to rerender. Please be patient :) "}),Object(a.jsxs)("div",{className:"ColorPalette",children:[Object(a.jsx)("label",{htmlFor:"background-color-ascii",children:"Background color ascii"}),Object(a.jsx)("div",{id:"Color-input-container",children:Object(a.jsx)("input",{type:"color",id:"background-color-ascii",name:"background-color-ascii",value:c,onChange:function(e){return n("backgroundColorAscii",e.target.value)}})})]})]})};n(21);var A=function(){var e=x(),t=e.image,n=e.readFile,i=e.processing,c=e.configuration,r=e.setConfigurationParam;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{id:"Forms",children:[Object(a.jsxs)("div",{className:"Form-Item",children:[Object(a.jsx)(k,{configuration:c,setConfigurationParam:r}),Object(a.jsx)("p",{children:Object(a.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&n(t)}})})]}),Object(a.jsxs)("div",{className:"Form-Item",children:[Object(a.jsx)(N,{configuration:c,setConfigurationParam:r}),Object(a.jsx)("div",{id:"Canvas-Container",children:Object(a.jsx)(v,{imageData:t})})]})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{id:"Ascii-container",style:{backgroundColor:c.backgroundColorAscii},children:Object(a.jsx)(w,{imageData:t,colorize:c.colorizeAscii,processing:i})})]})};n(22);var y=function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("header",{className:"App-header",children:"Image converter to Ascii"}),Object(a.jsx)("div",{className:"App-content",children:Object(a.jsx)(A,{})}),Object(a.jsx)("footer",{className:"App-footer",children:"Made by Guillaume Gomez"})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root")),S()}],[[23,1,2]]]);
//# sourceMappingURL=main.235a3064.chunk.js.map