(this["webpackJsonpimg-to-ascii"]=this["webpackJsonpimg-to-ascii"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(1),c=n.n(a),r=n(9),o=n.n(r),s=(n(15),n(5)),l=n(2),d=n(3),u=n(7),h=n(16);function j(e,t,n){return.21*e+.72*t+.07*n}function b(e,t){var n=t.maxWidth,i=t.maxHeight,a=t.autoScale;console.log(a);var c=a?Math.floor(function(){var e=document.createElement("pre");e.style.display="inline",e.textContent=" ",document.body.appendChild(e);var t=e.getBoundingClientRect(),n=t.width,i=t.height;return document.body.removeChild(e),i/n}()*e.width):e.width;if(e.height>i){var r=Math.floor(c*i/e.height);return Object(l.a)(Object(l.a)({},e),{},{width:r,height:i})}if(e.width>n){var o=Math.floor(e.height*n/c);return Object(l.a)(Object(l.a)({},e),{},{width:n,height:o})}return e}function g(e,t){for(var n=e.data.slice(),i=0;i<n.length;i+=4){var a=j(n[i],n[i+1],n[i+2]);n[i]=n[i+1]=n[i+2]=a}return new ImageData(n,e.width,e.height)}function m(e,t){var n=t.colors,i=new h({colors:n,dithKern:"FloydSteinberg",minHueCols:0});i.sample(e.data.slice());var a=i.reduce(e.data.slice());return new ImageData(Uint8ClampedArray.from(a),e.width,e.height)}function f(e,t,n){var i=document.createElement("canvas"),a=i.getContext("2d");return i.height=n,i.width=t,a.drawImage(e,0,0,t,n),a.getImageData(0,0,t,n)}var O={file:null};var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=Object(a.useState)(e.file),n=Object(d.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)(!1),o=Object(d.a)(r,2),u=o[0],h=o[1],j=Object(a.useState)(null),x=Object(d.a)(j,2),v=x[0],p=x[1],C=Object(a.useState)({maxWidth:80,maxHeight:80,autoScale:!0,colorizeImage:!1,colorizeAscii:!1,colors:12,backgroundColorAscii:"#1D2A49"}),k=Object(d.a)(C,2),w=k[0],N=k[1];function F(e){c(e)}function A(){if(i){h(!0);var e=new FileReader;e.onload=function(t){var n=new Image;n.onload=function(){var e=b({data:new Uint8ClampedArray,width:n.width,height:n.height},w),t=e.width,i=e.height,a=f(n,t,i),c=null;c=w.colorizeImage?m(a,w):g(m(a,w)),p(c),h(!1)},e.result&&(n.src=e.result)},e.readAsDataURL(i)}}function S(e,t){N(Object(l.a)(Object(l.a)({},w),{},Object(s.a)({},e,t)))}return{image:v,processing:u,hasFile:null!==i,readFile:F,configuration:w,setConfigurationParam:S,submit:A}};n(17);var v=function(e){var t=e.imageData,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(t){var e=n.current;if(!e)return;e.getContext("2d").putImageData(t,0,0)}}),[t]),t?Object(i.jsx)("canvas",{id:"Canvas-image-container",width:t.width,height:t.height,ref:n}):Object(i.jsx)(i.Fragment,{})},p=(n(18),"$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`'. "),C=p.length;var k=function(e){var t=e.imageData,n=e.colorize,c=e.processing,r=Object(a.useMemo)((function(){return function(e){return console.log("drawAscii"),e?l(e).reduce((function(t,n,i){var a=s(n);return(i+1)%e.width===0&&(a+="\n"),t+a}),""):""}(t)}),[t]),o=Object(a.useMemo)((function(){return function(e){if(console.log("drawAsciiWithColor"),!e)return"";var t=l(e),n=function(e){for(var t=[],n=0;n<e.data.length;n+=4){var i=e.data[n],a=e.data[n+1],c=e.data[n+2];t=[].concat(Object(u.a)(t),[[i,a,c]])}return t}(e);if(t.length!==n.length)return Object(i.jsx)(i.Fragment,{});for(var a=[],c=0;c<t.length;++c){var r=s(t[c]);(c+1)%e.width===0&&a.push(Object(i.jsx)("br",{},c+"br")),a.push(Object(i.jsx)("span",{style:{color:h(n[c])},children:r},c))}return a}(t)}),[t]);function s(e){return p[Math.ceil((C-1)*e/255)]}function l(e){for(var t=[],n=0;n<e.data.length;n+=4){var i=j(e.data[n],e.data[n+1],e.data[n+2]);t=[].concat(Object(u.a)(t),[i])}return t}function h(e){var t=Object(d.a)(e,3),n=t[0],i=t[1],a=t[2];return"rgb(".concat(n,", ").concat(i,", ").concat(a,")")}return c?Object(i.jsx)("p",{children:"Work in progress..."}):Object(i.jsx)("pre",{className:"Ascii-content",children:n?o:r})};n(19);var w=function(e){var t=e.configuration,n=e.setConfigurationParam,a=e.readFile,c=e.hasFile,r=e.submitCallback,o=t.maxWidth,s=t.maxHeight,l=t.colors,d=t.colorizeImage,u=t.autoScale;return Object(i.jsxs)("div",{id:"Form-content",children:[Object(i.jsx)("h2",{className:"H2-title",children:"Setup"}),Object(i.jsx)("p",{children:Object(i.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&a(t)}})}),Object(i.jsxs)("div",{className:"Slide-container",children:[Object(i.jsxs)("div",{className:"Slide-container-label",children:["Max Width : ",o]}),Object(i.jsx)("div",{className:"Slide-container-input",children:Object(i.jsx)("input",{type:"range",min:80,max:100,value:o,className:"slider",onChange:function(e){return n("maxWidth",parseInt(e.target.value))}})})]}),Object(i.jsxs)("div",{className:"Slide-container",children:[Object(i.jsxs)("div",{className:"Slide-container-label",children:["Max Height : ",s]}),Object(i.jsx)("div",{className:"Slide-container-input",children:Object(i.jsx)("input",{type:"range",min:80,max:100,value:s,className:"slider",onChange:function(e){return n("maxHeight",parseInt(e.target.value))}})})]}),Object(i.jsxs)("div",{className:"Checkbox-container",children:[Object(i.jsx)("label",{htmlFor:"autoscale",children:"Autoscale"}),Object(i.jsx)("input",{type:"checkbox",name:"autoscale",id:"autoscale",checked:u,onChange:function(e){return n("autoScale",!!e.target.checked)}})]}),Object(i.jsxs)("div",{className:"Checkbox-container",children:[Object(i.jsx)("label",{htmlFor:"Colorize",children:"Colorize Image"}),Object(i.jsx)("input",{type:"checkbox",name:"Colorize",id:"Colorize",checked:d,onChange:function(e){return n("colorizeImage",!!e.target.checked)}})]}),Object(i.jsxs)("div",{className:"Slide-container",children:[Object(i.jsxs)("div",{className:"Slide-container-label",children:["Colors : ",l]}),Object(i.jsx)("div",{className:"Slide-container-input",children:Object(i.jsx)("input",{type:"range",min:2,max:68,value:l,className:"slider",onChange:function(e){return n("colors",parseInt(e.target.value))}})})]}),Object(i.jsx)("div",{className:"Button-container",children:Object(i.jsx)("button",{type:"button",disabled:!c,onClick:r,children:"Convert"})})]})};n(20);var N=function(e){var t=e.configuration,n=e.setConfigurationParam,a=t.colorizeAscii,c=t.backgroundColorAscii;return Object(i.jsxs)("div",{id:"Option",children:[Object(i.jsx)("h2",{className:"H2-title",children:"Options"}),Object(i.jsxs)("div",{className:"Checkbox-container-color",children:[Object(i.jsx)("label",{htmlFor:"Colorize",children:"Colorize Ascii"}),Object(i.jsx)("br",{}),Object(i.jsx)("input",{type:"checkbox",name:"Colorize",id:"Colorize",checked:a,onChange:function(e){return n("colorizeAscii",!!e.target.checked)}})]}),Object(i.jsx)("p",{id:"hint",children:"Toggle this option can takes time to rerender. Please be patient :) "}),Object(i.jsxs)("div",{className:"ColorPalette",children:[Object(i.jsx)("label",{htmlFor:"background-color-ascii",children:"Background color ascii"}),Object(i.jsx)("div",{id:"Color-input-container",children:Object(i.jsx)("input",{type:"color",id:"background-color-ascii",name:"background-color-ascii",value:c,onChange:function(e){return n("backgroundColorAscii",e.target.value)}})})]})]})};n(21);var F=function(){var e=x(),t=e.image,n=e.hasFile,a=e.readFile,c=e.processing,r=e.configuration,o=e.setConfigurationParam,s=e.submit;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{id:"Forms",children:[Object(i.jsx)("div",{className:"Form-Item",children:Object(i.jsx)(w,{configuration:r,setConfigurationParam:o,readFile:a,hasFile:n,submitCallback:s})}),Object(i.jsxs)("div",{className:"Form-Item",children:[Object(i.jsx)(N,{configuration:r,setConfigurationParam:o}),Object(i.jsx)("div",{id:"Canvas-Container",children:Object(i.jsx)(v,{imageData:t})})]})]}),Object(i.jsx)("hr",{}),Object(i.jsx)("div",{id:"Ascii-container",style:{backgroundColor:r.backgroundColorAscii},children:Object(i.jsx)(k,{imageData:t,colorize:r.colorizeAscii,processing:c})})]})};n(22);var A=function(){return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App-header",children:"Image converter to Ascii"}),Object(i.jsx)("div",{className:"App-content",children:Object(i.jsx)(F,{})}),Object(i.jsx)("footer",{className:"App-footer",children:"Made by Guillaume Gomez"})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,24)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),c(e),r(e)}))};o.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(A,{})}),document.getElementById("root")),S()}],[[23,1,2]]]);
//# sourceMappingURL=main.1c38df8b.chunk.js.map