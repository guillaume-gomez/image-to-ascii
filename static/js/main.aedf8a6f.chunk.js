(this["webpackJsonpimg-to-ascii"]=this["webpackJsonpimg-to-ascii"]||[]).push([[0],{18:function(e,t,a){},21:function(e,t,a){},22:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),i=a.n(c),r=a(9),o=a.n(r),l=(a(18),a(10)),s=a.n(l),d=a(11),u=a(6),h=a(2),j=a(3),b=a(4),g=a(20),m="$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`'. ",f=m.length;function O(e,t,a){return.21*e+.72*t+.07*a}function v(e){return m[Math.ceil((f-1)*e/255)]}function x(e,t){var a=t.maxWidth,n=t.maxHeight,c=t.autoScale;console.log(c);var i=c?Math.floor(function(){var e=document.createElement("pre");e.style.display="inline",e.textContent=" ",document.body.appendChild(e);var t=e.getBoundingClientRect(),a=t.width,n=t.height;return document.body.removeChild(e),n/a}()*e.width):e.width;if(e.height>n){var r=Math.floor(i*n/e.height);return Object(h.a)(Object(h.a)({},e),{},{width:r,height:n})}if(e.width>a){var o=Math.floor(e.height*a/i);return Object(h.a)(Object(h.a)({},e),{},{width:a,height:o})}return e}function p(e,t){for(var a=e.data.slice(),n=0;n<a.length;n+=4){var c=O(a[n],a[n+1],a[n+2]);a[n]=a[n+1]=a[n+2]=c}return new ImageData(a,e.width,e.height)}function C(e,t){var a=t.colors,n=new g({colors:a,dithKern:"FloydSteinberg",minHueCols:0});n.sample(e.data.slice());var c=n.reduce(e.data.slice());return new ImageData(Uint8ClampedArray.from(c),e.width,e.height)}function k(e,t,a){var n=document.createElement("canvas"),c=n.getContext("2d");return n.height=a,n.width=t,c.drawImage(e,0,0,t,a),c.getImageData(0,0,t,a)}var w={file:null};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=Object(c.useState)(e.file),a=Object(j.a)(t,2),n=a[0],i=a[1],r=Object(c.useState)(!1),o=Object(j.a)(r,2),l=o[0],s=o[1],d=Object(c.useState)(null),b=Object(j.a)(d,2),g=b[0],m=b[1],f=Object(c.useState)({maxWidth:80,maxHeight:80,autoScale:!0,colorizeImage:!0,colorizeAscii:!0,colors:12,backgroundColorAscii:"#1D2A49"}),O=Object(j.a)(f,2),v=O[0],y=O[1];function N(e){i(e)}function A(){if(n){s(!0);var e=new FileReader;e.onload=function(t){var a=new Image;a.onload=function(){var e=x({data:new Uint8ClampedArray,width:a.width,height:a.height},v),t=e.width,n=e.height,c=k(a,t,n),i=null;i=v.colorizeImage?C(c,v):p(C(c,v)),m(i),s(!1)},e.result&&(a.src=e.result)},e.readAsDataURL(n)}}function F(e,t){y(Object(h.a)(Object(h.a)({},v),{},Object(u.a)({},e,t)))}return{image:g,processing:l,hasFile:null!==n,readFile:N,configuration:v,setConfigurationParam:F,submit:A}};a(21);var N=function(e){var t=e.imageData,a=Object(c.useRef)(null);return Object(c.useEffect)((function(){if(t){var e=a.current;if(!e)return;e.getContext("2d").putImageData(t,0,0)}}),[t]),t?Object(n.jsx)("canvas",{id:"Canvas-image-container",width:t.width,height:t.height,ref:a}):Object(n.jsx)(n.Fragment,{})};a(22);var A=function(e){var t=e.imageData,a=e.colorize,i=e.processing,r=Object(c.useMemo)((function(){return function(e){return console.log("drawAscii"),e?function(e){for(var t=[],a=0;a<e.data.length;a+=4){var n=O(e.data[a],e.data[a+1],e.data[a+2]);t=[].concat(Object(b.a)(t),[n])}return t}(e).reduce((function(t,a,n){var c=v(a);return(n+1)%e.width===0&&(c+="\n"),t+c}),""):""}(t)}),[t]),o=Object(c.useMemo)((function(){return function(e){if(console.log("drawAsciiWithColor"),!e)return"";var t=[];return function(e){for(var t=[],a=[e.data[0],e.data[1],e.data[2]],n=0,c=0;c<e.data.length;c+=4){var i=e.data[c],r=e.data[c+1],o=e.data[c+2];if(i!==a[0]||r!==a[1]||o!==a[2]){var l=v(O(a[0],a[1],a[2]));n>0&&(t=[].concat(Object(b.a)(t),[{color:a.slice(),nbOccurences:n,char:l}])),n=0,a=[i,r,o]}if((c/4+1)%e.width===0){var s=v(O(a[0],a[1],a[2]));t=[].concat(Object(b.a)(t),[{color:a.slice(),nbOccurences:n,char:s},{color:[-1,-1,-1],nbOccurences:1,char:"\n"}]),n=-1}n+=1}return t}(e).forEach((function(e,a){var c=e.color,i=e.nbOccurences,r=e.char;"\n"===r?t.push(Object(n.jsx)("br",{},a+"br")):t.push(Object(n.jsx)("span",{style:{color:l(c)},children:r.repeat(i)},a))})),t}(t)}),[t]);function l(e){var t=Object(j.a)(e,3),a=t[0],n=t[1],c=t[2];return"rgb(".concat(a,", ").concat(n,", ").concat(c,")")}return i?Object(n.jsx)("p",{children:"Work in progress..."}):Object(n.jsx)("pre",{className:"Ascii-content",children:a?o:r})};a(23);var F=function(e){var t=e.configuration,a=e.setConfigurationParam,c=e.readFile,i=e.hasFile,r=e.submitCallback,o=t.maxWidth,l=t.maxHeight,s=t.colors,d=t.colorizeImage,u=t.autoScale;return Object(n.jsxs)("div",{id:"Form-content",children:[Object(n.jsx)("h2",{className:"H2-title",children:"Setup"}),Object(n.jsx)("p",{children:Object(n.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&c(t)}})}),Object(n.jsxs)("div",{className:"Slide-container",children:[Object(n.jsxs)("div",{className:"Slide-container-label",children:["Max Width : ",o]}),Object(n.jsx)("div",{className:"Slide-container-input",children:Object(n.jsx)("input",{type:"range",min:80,max:100,value:o,className:"slider",onChange:function(e){return a("maxWidth",parseInt(e.target.value))}})})]}),Object(n.jsxs)("div",{className:"Slide-container",children:[Object(n.jsxs)("div",{className:"Slide-container-label",children:["Max Height : ",l]}),Object(n.jsx)("div",{className:"Slide-container-input",children:Object(n.jsx)("input",{type:"range",min:80,max:100,value:l,className:"slider",onChange:function(e){return a("maxHeight",parseInt(e.target.value))}})})]}),Object(n.jsxs)("div",{className:"Checkbox-container",children:[Object(n.jsx)("label",{htmlFor:"autoscale",children:"Autoscale"}),Object(n.jsx)("input",{type:"checkbox",name:"autoscale",id:"autoscale",checked:u,onChange:function(e){return a("autoScale",!!e.target.checked)}})]}),Object(n.jsxs)("div",{className:"Checkbox-container",children:[Object(n.jsx)("label",{htmlFor:"Colorize",children:"Colorize Image"}),Object(n.jsx)("input",{type:"checkbox",name:"Colorize",id:"Colorize",checked:d,onChange:function(e){return a("colorizeImage",!!e.target.checked)}})]}),Object(n.jsxs)("div",{className:"Slide-container",children:[Object(n.jsxs)("div",{className:"Slide-container-label",children:["Colors : ",s]}),Object(n.jsx)("div",{className:"Slide-container-input",children:Object(n.jsx)("input",{type:"range",min:2,max:68,value:s,className:"slider",onChange:function(e){return a("colors",parseInt(e.target.value))}})})]}),Object(n.jsx)("div",{className:"Button-container",children:Object(n.jsx)("button",{type:"button",disabled:!i,onClick:r,children:"Convert"})})]})};a(24);var S=function(e){var t=e.configuration,a=e.setConfigurationParam,c=e.saveAsImageCallback,i=e.hasFile,r=t.colorizeAscii,o=t.backgroundColorAscii;return Object(n.jsxs)("div",{id:"Option",children:[Object(n.jsx)("h2",{className:"H2-title",children:"Options"}),Object(n.jsxs)("div",{className:"Checkbox-container-color",children:[Object(n.jsx)("label",{htmlFor:"Colorize",children:"Colorize Ascii"}),Object(n.jsx)("br",{}),Object(n.jsx)("input",{type:"checkbox",name:"Colorize",id:"Colorize",checked:r,onChange:function(e){return a("colorizeAscii",!!e.target.checked)}})]}),Object(n.jsx)("p",{id:"hint",children:"Toggle this option can takes time to rerender. Please be patient :) "}),Object(n.jsxs)("div",{className:"ColorPalette",children:[Object(n.jsx)("label",{htmlFor:"background-color-ascii",children:"Background color ascii"}),Object(n.jsx)("div",{id:"Color-input-container",children:Object(n.jsx)("input",{type:"color",id:"background-color-ascii",name:"background-color-ascii",value:o,onChange:function(e){return a("backgroundColorAscii",e.target.value)}})})]}),Object(n.jsx)("div",{id:"Convert",children:Object(n.jsx)("button",{disabled:!i,onClick:c,children:"Save as image"})})]})};a(25);var z=function(){var e=y(),t=e.image,a=e.hasFile,i=e.readFile,r=e.processing,o=e.configuration,l=e.setConfigurationParam,u=e.submit,h=Object(c.useRef)(null);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{id:"Forms",children:[Object(n.jsx)("div",{className:"Form-Item",children:Object(n.jsx)(F,{configuration:o,setConfigurationParam:l,readFile:i,hasFile:a,submitCallback:u})}),Object(n.jsxs)("div",{className:"Form-Item",children:[Object(n.jsx)(S,{configuration:o,setConfigurationParam:l,saveAsImageCallback:function(){if(h&&h.current){var e=h.current,t=e.cloneNode(!0);document.body.appendChild(t),t.style.width="".concat(e.children[0].clientWidth,"px"),t.style.height="".concat(e.children[0].clientHeight,"px"),t.style.margin="0",t.style.color="white",s.a.toBlob(t).then((function(e){Object(d.saveAs)(e,"my-export.png"),document.body.removeChild(t)})).catch((function(e){console.log(e),alert("oops, something went wrong!")}))}},hasFile:!0}),Object(n.jsx)("div",{id:"Canvas-Container",children:Object(n.jsx)(N,{imageData:t})})]})]}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{ref:h,id:"Ascii-container",style:{backgroundColor:o.backgroundColorAscii},children:Object(n.jsx)(A,{imageData:t,colorize:o.colorizeAscii,processing:r})})]})},I=a(12);a(27);var D=function(){return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)("header",{className:"App-header",children:"Image converter to Ascii"}),Object(n.jsx)("div",{className:"App-content",children:Object(n.jsx)(z,{})}),Object(n.jsxs)("footer",{className:"App-footer",children:["Made by Guillaume Gomez",Object(n.jsx)(I.a,{href:"https://github.com/guillaume-gomez/image-to-ascii","data-color-scheme":"no-preference: light; light: light; dark: dark;","data-icon":"octicon-star","data-size":"large","aria-label":"Star guillaume-gomez/image-to-ascii on GitHub",children:"Star"})]})]})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,29)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};o.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(D,{})}),document.getElementById("root")),M()}},[[28,1,2]]]);
//# sourceMappingURL=main.aedf8a6f.chunk.js.map