(this["webpackJsonpimg-to-ascii"]=this["webpackJsonpimg-to-ascii"]||[]).push([[0],[,,,,,,,,,,,,,,,,,function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),i=n.n(a),r=n(9),o=n.n(r),l=(n(17),n(10)),s=n.n(l),d=n(11),u=n(6),h=n(2),j=n(3),b=n(4),g=n(19),m="$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,\"^`'. ",f=m.length;function O(e,t,n){return.21*e+.72*t+.07*n}function v(e){return m[Math.ceil((f-1)*e/255)]}function x(e,t){var n=t.maxWidth,c=t.maxHeight,a=t.autoScale;console.log(a);var i=a?Math.floor(function(){var e=document.createElement("pre");e.style.display="inline",e.textContent=" ",document.body.appendChild(e);var t=e.getBoundingClientRect(),n=t.width,c=t.height;return document.body.removeChild(e),c/n}()*e.width):e.width;if(e.height>c){var r=Math.floor(i*c/e.height);return Object(h.a)(Object(h.a)({},e),{},{width:r,height:c})}if(e.width>n){var o=Math.floor(e.height*n/i);return Object(h.a)(Object(h.a)({},e),{},{width:n,height:o})}return e}function p(e,t){for(var n=e.data.slice(),c=0;c<n.length;c+=4){var a=O(n[c],n[c+1],n[c+2]);n[c]=n[c+1]=n[c+2]=a}return new ImageData(n,e.width,e.height)}function C(e,t){var n=t.colors,c=new g({colors:n,dithKern:"FloydSteinberg",minHueCols:0});c.sample(e.data.slice());var a=c.reduce(e.data.slice());return new ImageData(Uint8ClampedArray.from(a),e.width,e.height)}function k(e,t,n){var c=document.createElement("canvas"),a=c.getContext("2d");return c.height=n,c.width=t,a.drawImage(e,0,0,t,n),a.getImageData(0,0,t,n)}var w={file:null};var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=Object(a.useState)(e.file),n=Object(j.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(!1),o=Object(j.a)(r,2),l=o[0],s=o[1],d=Object(a.useState)(null),b=Object(j.a)(d,2),g=b[0],m=b[1],f=Object(a.useState)({maxWidth:80,maxHeight:80,autoScale:!0,colorizeImage:!0,colorizeAscii:!0,colors:12,backgroundColorAscii:"#1D2A49"}),O=Object(j.a)(f,2),v=O[0],y=O[1];function N(e){i(e)}function A(){if(c){s(!0);var e=new FileReader;e.onload=function(t){var n=new Image;n.onload=function(){var e=x({data:new Uint8ClampedArray,width:n.width,height:n.height},v),t=e.width,c=e.height,a=k(n,t,c),i=null;i=v.colorizeImage?C(a,v):p(C(a,v)),m(i),s(!1)},e.result&&(n.src=e.result)},e.readAsDataURL(c)}}function F(e,t){y(Object(h.a)(Object(h.a)({},v),{},Object(u.a)({},e,t)))}return{image:g,processing:l,hasFile:null!==c,readFile:N,configuration:v,setConfigurationParam:F,submit:A}};n(20);var N=function(e){var t=e.imageData,n=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(t){var e=n.current;if(!e)return;e.getContext("2d").putImageData(t,0,0)}}),[t]),t?Object(c.jsx)("canvas",{id:"Canvas-image-container",width:t.width,height:t.height,ref:n}):Object(c.jsx)(c.Fragment,{})};n(21);var A=function(e){var t=e.imageData,n=e.colorize,i=e.processing,r=Object(a.useMemo)((function(){return function(e){return console.log("drawAscii"),e?function(e){for(var t=[],n=0;n<e.data.length;n+=4){var c=O(e.data[n],e.data[n+1],e.data[n+2]);t=[].concat(Object(b.a)(t),[c])}return t}(e).reduce((function(t,n,c){var a=v(n);return(c+1)%e.width===0&&(a+="\n"),t+a}),""):""}(t)}),[t]),o=Object(a.useMemo)((function(){return function(e){if(console.log("drawAsciiWithColor"),!e)return"";var t=[];return function(e){for(var t=[],n=[e.data[0],e.data[1],e.data[2]],c=0,a=0;a<e.data.length;a+=4){var i=e.data[a],r=e.data[a+1],o=e.data[a+2];if(i!==n[0]||r!==n[1]||o!==n[2]){var l=v(O(n[0],n[1],n[2]));c>0&&(t=[].concat(Object(b.a)(t),[{color:n.slice(),nbOccurences:c,char:l}])),c=0,n=[i,r,o]}if((a/4+1)%e.width===0){var s=v(O(n[0],n[1],n[2]));t=[].concat(Object(b.a)(t),[{color:n.slice(),nbOccurences:c,char:s},{color:[-1,-1,-1],nbOccurences:1,char:"\n"}]),c=-1}c+=1}return t}(e).forEach((function(e,n){var a=e.color,i=e.nbOccurences,r=e.char;"\n"===r?t.push(Object(c.jsx)("br",{},n+"br")):t.push(Object(c.jsx)("span",{style:{color:l(a)},children:r.repeat(i)},n))})),t}(t)}),[t]);function l(e){var t=Object(j.a)(e,3),n=t[0],c=t[1],a=t[2];return"rgb(".concat(n,", ").concat(c,", ").concat(a,")")}return i?Object(c.jsx)("p",{children:"Work in progress..."}):Object(c.jsx)("pre",{className:"Ascii-content",children:n?o:r})};n(22);var F=function(e){var t=e.configuration,n=e.setConfigurationParam,a=e.readFile,i=e.hasFile,r=e.submitCallback,o=t.maxWidth,l=t.maxHeight,s=t.colors,d=t.colorizeImage,u=t.autoScale;return Object(c.jsxs)("div",{id:"Form-content",children:[Object(c.jsx)("h2",{className:"H2-title",children:"Setup"}),Object(c.jsx)("p",{children:Object(c.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&a(t)}})}),Object(c.jsxs)("div",{className:"Slide-container",children:[Object(c.jsxs)("div",{className:"Slide-container-label",children:["Max Width : ",o]}),Object(c.jsx)("div",{className:"Slide-container-input",children:Object(c.jsx)("input",{type:"range",min:80,max:100,value:o,className:"slider",onChange:function(e){return n("maxWidth",parseInt(e.target.value))}})})]}),Object(c.jsxs)("div",{className:"Slide-container",children:[Object(c.jsxs)("div",{className:"Slide-container-label",children:["Max Height : ",l]}),Object(c.jsx)("div",{className:"Slide-container-input",children:Object(c.jsx)("input",{type:"range",min:80,max:100,value:l,className:"slider",onChange:function(e){return n("maxHeight",parseInt(e.target.value))}})})]}),Object(c.jsxs)("div",{className:"Checkbox-container",children:[Object(c.jsx)("label",{htmlFor:"autoscale",children:"Autoscale"}),Object(c.jsx)("input",{type:"checkbox",name:"autoscale",id:"autoscale",checked:u,onChange:function(e){return n("autoScale",!!e.target.checked)}})]}),Object(c.jsxs)("div",{className:"Checkbox-container",children:[Object(c.jsx)("label",{htmlFor:"Colorize",children:"Colorize Image"}),Object(c.jsx)("input",{type:"checkbox",name:"Colorize",id:"Colorize",checked:d,onChange:function(e){return n("colorizeImage",!!e.target.checked)}})]}),Object(c.jsxs)("div",{className:"Slide-container",children:[Object(c.jsxs)("div",{className:"Slide-container-label",children:["Colors : ",s]}),Object(c.jsx)("div",{className:"Slide-container-input",children:Object(c.jsx)("input",{type:"range",min:2,max:68,value:s,className:"slider",onChange:function(e){return n("colors",parseInt(e.target.value))}})})]}),Object(c.jsx)("div",{className:"Button-container",children:Object(c.jsx)("button",{type:"button",disabled:!i,onClick:r,children:"Convert"})})]})};n(23);var I=function(e){var t=e.configuration,n=e.setConfigurationParam,a=e.saveAsImageCallback,i=e.hasFile,r=t.colorizeAscii,o=t.backgroundColorAscii;return Object(c.jsxs)("div",{id:"Option",children:[Object(c.jsx)("h2",{className:"H2-title",children:"Options"}),Object(c.jsxs)("div",{className:"Checkbox-container-color",children:[Object(c.jsx)("label",{htmlFor:"Colorize",children:"Colorize Ascii"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"checkbox",name:"Colorize",id:"Colorize",checked:r,onChange:function(e){return n("colorizeAscii",!!e.target.checked)}})]}),Object(c.jsx)("p",{id:"hint",children:"Toggle this option can takes time to rerender. Please be patient :) "}),Object(c.jsxs)("div",{className:"ColorPalette",children:[Object(c.jsx)("label",{htmlFor:"background-color-ascii",children:"Background color ascii"}),Object(c.jsx)("div",{id:"Color-input-container",children:Object(c.jsx)("input",{type:"color",id:"background-color-ascii",name:"background-color-ascii",value:o,onChange:function(e){return n("backgroundColorAscii",e.target.value)}})})]}),Object(c.jsx)("div",{id:"Convert",children:Object(c.jsx)("button",{disabled:!i,onClick:a,children:"Save as image"})})]})};n(24);var S=function(){var e=y(),t=e.image,n=e.hasFile,i=e.readFile,r=e.processing,o=e.configuration,l=e.setConfigurationParam,u=e.submit,h=Object(a.useRef)(null);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{id:"Forms",children:[Object(c.jsx)("div",{className:"Form-Item",children:Object(c.jsx)(F,{configuration:o,setConfigurationParam:l,readFile:i,hasFile:n,submitCallback:u})}),Object(c.jsxs)("div",{className:"Form-Item",children:[Object(c.jsx)(I,{configuration:o,setConfigurationParam:l,saveAsImageCallback:function(){if(h&&h.current){var e=h.current,t=e.cloneNode(!0);document.body.appendChild(t),t.style.width="".concat(e.children[0].clientWidth,"px"),t.style.height="".concat(e.children[0].clientHeight,"px"),t.style.margin="0",t.style.color="white",s.a.toBlob(t).then((function(e){Object(d.saveAs)(e,"my-export.png"),document.body.removeChild(t)})).catch((function(e){console.log(e),alert("oops, something went wrong!")}))}},hasFile:!0}),Object(c.jsx)("div",{id:"Canvas-Container",children:Object(c.jsx)(N,{imageData:t})})]})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{ref:h,id:"Ascii-container",style:{backgroundColor:o.backgroundColorAscii},children:Object(c.jsx)(A,{imageData:t,colorize:o.colorizeAscii,processing:r})})]})};n(25);var z=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)("header",{className:"App-header",children:"Image converter to Ascii"}),Object(c.jsx)("div",{className:"App-content",children:Object(c.jsx)(S,{})}),Object(c.jsx)("footer",{className:"App-footer",children:"Made by Guillaume Gomez"})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,27)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(z,{})}),document.getElementById("root")),D()}],[[26,1,2]]]);
//# sourceMappingURL=main.edd056c0.chunk.js.map